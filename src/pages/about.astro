---
import BaseLayout from '../layouts/BaseLayout.astro';
import Bio from '../components/Bio.astro';
import Dropdown from '../components/Dropdown.astro';
import Resume from '../content/resume.md';
import WorkHistory from '../content/work_history.md';

const title = 'About';
const description = 'About me';
const permalink = `${Astro.site.href}about`;
// Accept an optional server-side `open` query parameter so fetching
// `/about?open=resume` will render the Resume dropdown open.
const openParam = (Astro.url && Astro.url.searchParams && Astro.url.searchParams.get('open')) || (Astro.url && Astro.url.hash ? Astro.url.hash.replace('#', '') : null);
---

<style>
  .about-image {
    float: left;
    margin: 0 2em 2em 0;
  }
  .about p {
    font-size: 1.125rem;
    padding-top: 0.5em;
    line-height: 1.6;
  }

</style>

<BaseLayout title={title} description={description} permalink={permalink}>
  <div class="container">
    <article class="about">
      <Bio bioImgHeight='15em' bioImgWidth='15em' bioImgRadius='100%' />
      <p>
        In my free time, I like reading, playing Paradox map games, going on walks around the city, and playing with my terminal.
      </p>

      <Dropdown title="Resume" id="resume" open={openParam === 'resume'} hxGet="/_partials/resume" hxTarget="#resume .dropdown-body" hxSwap="innerHTML" hxTrigger="click once" preview="Motivated Computer Scientist and former U.S. Air Force munitions specialist transitioning into software engineering and systems work.">
        <Resume />
      </Dropdown>

      <Dropdown title="Work History" id="work-history" open={openParam === 'work-history'} hxGet="/_partials/work-history" hxTarget="#work-history .dropdown-body" hxSwap="innerHTML" hxTrigger="click once" preview="Professional experience spanning IT consulting, military munitions systems, and service industry roles with transferable skills in leadership, systems thinking, and technical documentation.">
        <WorkHistory />
      </Dropdown>
    </article>
  </div>
</BaseLayout>

<!-- No client-side dropdown coordination needed when using server-driven htmx navigation. -->
